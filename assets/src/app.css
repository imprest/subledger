/* if you want dark mode via class */
/* default is to use prefers-color-scheme */
@variant dark (&:where(.dark, .dark *));

@variant phx-click-loading (.phx-click-loading&, .phx-click-loading &);
@variant phx-submit-loading (.phx-submit-loading&, .phx-submit-loading &);
@variant phx-change-loading (.phx-change-loading&, .phx-change-loading &);

@plugin "@tailwindcss/forms";
@plugin "./heroicons.tailwind.plugin.js";

@source "../../lib/subledger_web/{components,controllers}/**/*.{heex,ex}";

@import 'tailwindcss';

@layer components {
	@import './css/button.css';
	@import './css/layout.css';
	@import './css/nav.css';
	@import './css/select.css';
	@import './css/table.css';
	@import './css/tabs.css';
	@import './css/tags.css';
}

@theme {
	--font-display: 'Inter', system-ui, 'Helvetica', 'sans-serif';
	--header-height: 3rem;

	--color-background: hsl(0, 0%, 100%);
	--color-foreground: hsl(222.2, 47.4%, 11.2%);

	/* generated by https://huetone.ardov.me/ and https://themes.ajose.dev/ and oklch.com */
	/* user default red for errors, yellow for warnings and gray for rest */
	--color-primary: oklch(0.5865 0.1366 241.18);
	--color-primary-hover: oklch(
		from var(--color-primary) calc(l - 0.09) calc(c - 0.018) calc(h + 1)
	);
	--color-primary-focus: var(--color-primary);
	--color-primary-active: oklch(from var(--color-primary) calc(l - 0.15) calc(c - 0.04) h);
	--color-highlight: oklch(
		from var(--color-primary) calc(l + 0.3249) calc(c - 0.1032) calc(h - 9.97)
	);

	--color-danger: oklch(0.5602 0.2078 25.33);
	--color-danger-hover: oklch(from var(--color-danger) calc(l - 0.09) calc(c - 0.018) calc(h + 1));
	--color-danger-focus: var(--color-danger);
	--color-danger-active: oklch(from var(--color-danger) calc(l - 0.15) calc(c - 0.04) h);

	--color-even-row: oklch(0.975 0.0518 107.32);
	/* colors 
  background, foreground, default-hover, default-active
  focus / ring (based on primary)
  primary, primary-hover, primary-active, primary-focus
  danger, danger-hover, danger-active
  */
}

@utility flex-center {
	align-items: center;
	justify-content: center;
}

@layer base {
	html {
		box-sizing: border-box;
		width: 100%;
		text-rendering: optimizeLegibility;
		font-smooth: antiliased;
		font-synthesis: none;
	}

	body {
		@apply bg-background text-foreground text-sm;
		box-sizing: border-box;
		height: 100%;
		width: 100%;
		font-feature-settings:
			'rlig' 1,
			'calt' 1;
	}

	a {
		@apply text-primary hover:underline-offset-2 hover:border-b-2;
	}
	a.secondary,
	a.contrast {
		@apply underline;
	}

	strong {
		@apply text-gray-900;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply font-medium;
	}

	h1 {
		@apply text-4xl text-gray-900;
	}
	h2 {
		@apply text-3xl text-gray-900;
	}
	h3 {
		@apply text-2xl text-gray-800;
	}
	h4 {
		@apply text-xl text-gray-700;
	}
	h5 {
		@apply text-lg text-gray-600;
	}
	h6 {
		@apply text-base text-gray-500;
	}

	hgroup {
		@apply mb-1;

		> * {
			@apply mb-0;
		}
		> *:last-child {
			@apply text-gray-500 text-base pl-0.5;
		}
	}

	[type='checkbox'],
	[type='radio'] {
		@apply border-2;
	}
	[type='checkbox'][type='switch'] {
		@apply border-[3px];
	}

	progress,
	[type='checkbox'],
	[type='radio'],
	[type='range'] {
		@apply accent-primary;
	}

	.skip-link {
		@apply fixed top-0 left-0 right-0 text-center p-2 transform-gpu ease-in-out duration-300 bg-gray-600 text-white z-30;
		translate: 0 -100%;
	}

	.skip-link:focus {
		translate: 0 0;
	}

	.header {
		@apply fixed top-0 left-0 z-10 bg-background border-b border-gray-300 w-full flex;
		height: var(--header-height);
	}

	/* content */
	main {
		@apply h-full;
		margin-top: var(--header-height);
	}

	iframe {
		display: none;
	}

	select {
		@apply py-1 pr-10 pl-2;
	}

	input[type='search'],
	input[type='date'] {
		@apply py-1;
	}

	pre,
	code,
	kbd,
	samp {
		@apply bg-gray-300;
		font-family: 'Menlo', 'Consolas', 'Roboto Mono', 'Ubuntu Monospace', 'Noto Mono', 'Oxygen Mono',
			'Liberation Mono', monospace, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
			'Noto Color Emoji';
	}

	code {
		@apply py-2 px-4 align-bottom text-primary;
	}

	pre {
		@apply p-2 border-l-2 border-primary;
	}

	kbd {
		font-weight: bolder;
	}

	progress {
		@apply inline-block appearance-none w-full h-2
    mb-1 overflow-hidden border-0 rounded-sm bg-primary;
	}

	[dir='rtl'] {
		@media (prefers-reduced-motion: no-preference) {
			progress:indeterminate {
				animation-direction: reverse;
			}
		}
	}

	@keyframes progress-indeterminate {
		0% {
			background-position: 200% 0;
		}
		100% {
			background-position: -200% 0;
		}
	}
}
